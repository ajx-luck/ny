
                    Nyquest Technology Co., Ltd.

NYASM 2.26

    ADDR  OPCODE/VALUE              LINE   TAG  SOURCE                   STATEMENT    

                                    1-    1     ;--------------------------------------------------------
                                    1-    2     ; File Created by SDCC : free open source ANSI-C Compiler
                                    1-    3     ; Version 3.7.1 #0 (MSVC)
                                    1-    4     ;--------------------------------------------------------
                                    1-    5     ; NY8A port
                                    1-    6     ;--------------------------------------------------------
                                    1-    7     	.file	"main.c"
                                    1-    8     	list	p=NY8A051F,c=on
                                    1-    9     	#include "ny8a051f.inc"
                                    1-   11     ;--------------------------------------------------------
                                    1-   12     ; external declarations
                                    1-   13     ;--------------------------------------------------------
                                    1-   14     	extern	_PORTBbits
                                    1-   15     	extern	_PCONbits
                                    1-   16     	extern	_BWUCONbits
                                    1-   17     	extern	_BPLCONbits
                                    1-   18     	extern	_BPHCONbits
                                    1-   19     	extern	_INTEbits
                                    1-   20     	extern	_INTFbits
                                    1-   21     	extern	_INDF
                                    1-   22     	extern	_TMR0
                                    1-   23     	extern	_PCL
                                    1-   24     	extern	_STATUS
                                    1-   25     	extern	_FSR
                                    1-   26     	extern	_PORTB
                                    1-   27     	extern	_PCON
                                    1-   28     	extern	_BWUCON
                                    1-   29     	extern	_PCHBUF
                                    1-   30     	extern	_BPLCON
                                    1-   31     	extern	_BPHCON
                                    1-   32     	extern	_INTE
                                    1-   33     	extern	_INTF
                                    1-   34     	extern	_TMR1
                                    1-   35     	extern	_T1CR1
                                    1-   36     	extern	_T1CR2
                                    1-   37     	extern	_PWM1DUTY
                                    1-   38     	extern	_PS1CV
                                    1-   39     	extern	_BZ1CR
                                    1-   40     	extern	_IRCR
                                    1-   41     	extern	_TBHP
                                    1-   42     	extern	_TBHD
                                    1-   43     	extern	_OSCCR
                                    1-   44     	extern	_IOSTB
                                    1-   45     	extern	_PS0CV
                                    1-   46     	extern	_BODCON
                                    1-   47     	extern	_PCON1
                                    1-   48     	extern	_T0MD
                                    1-   49     	extern	__nyc_ny8_startup
                                    1-   50     ;--------------------------------------------------------
                                    1-   51     ; global declarations
                                    1-   52     ;--------------------------------------------------------
                                    1-   53     	extern	_pwmStart
                                    1-   54     	extern	_main
                                    1-   55     	extern	_pwmStop
                                    1-   57     	extern PSAVE
                                    1-   58     	extern SSAVE
                                    1-   59     	extern WSAVE
                                    1-   60     	extern STK02
                                    1-   61     	extern STK01
                                    1-   62     	extern STK00
                                    1-   64     .segment "uninit", 0x20000010
 20000010                           1-   65     PSAVE:
                                    1-   66     	.res 1
 20000011                           1-   67     SSAVE:
                                    1-   68     	.res 1
 20000012                           1-   69     WSAVE:
                                    1-   70     	.res 1
 20000013                           1-   71     STK02:
                                    1-   72     	.res 1
 20000014                           1-   73     STK01:
                                    1-   74     	.res 1
 20000015                           1-   75     STK00:
                                    1-   76     	.res 1
                                    1-   78     ;--------------------------------------------------------
                                    1-   79     ; global definitions
                                    1-   80     ;--------------------------------------------------------
                                    1-   81     ;--------------------------------------------------------
                                    1-   82     ; absolute symbol definitions
                                    1-   83     ;--------------------------------------------------------
                                    1-   84     ;--------------------------------------------------------
                                    1-   85     ; compiler-defined variables
                                    1-   86     ;--------------------------------------------------------
                                    1-   87     ;--------------------------------------------------------
                                    1-   88     ; initialized data
                                    1-   89     ;--------------------------------------------------------
                                    1-   90     ;--------------------------------------------------------
                                    1-   91     ; overlayable items in internal ram 
                                    1-   92     ;--------------------------------------------------------
                                    1-   93     ;	udata_ovr
                                    1-   94     ;--------------------------------------------------------
                                    1-   95     ; reset vector 
                                    1-   96     ;--------------------------------------------------------
                                    1-   97     ORG	0x0000
     0000 3rrr                      1-   98     	LGOTO	__nyc_ny8_startup
                                    1-   99     ;--------------------------------------------------------
                                    1-  100     ; code
                                    1-  101     ;--------------------------------------------------------
                                    1-  102     ;***
                                    1-  103     ;  pBlock Stats: dbName = M
                                    1-  104     ;***
                                    1-  105     ;has an exit
                                    1-  106     ;functions called:
                                    1-  107     ;   _pwmStart
                                    1-  108     ;   _pwmStart
                                    1-  109     ;; Starting pCode block
                                    1-  110     .segment "code"; module=main, function=_main
     0000                           1-  112     _main:
                                    1-  113     ; 2 exit points
                                    1-  114     	.line	10, "main.c"; 	PORTB = 0xCB;
     0000 21CB                      1-  115     	MOVIA	0xcb
     0001 00rr                      1-  116     	MOVAR	_PORTB
                                    1-  117     	.line	11, "main.c"; 	BPHCON = 0xF7;		//PB3 上拉
     0002 21F7                      1-  118     	MOVIA	0xf7
     0003 00rr                      1-  119     	MOVAR	_BPHCON
                                    1-  120     	.line	14, "main.c"; 	IOSTB =  C_PB0_Input | C_PB1_Input | C_PB3_Input;	
     0004 210B                      1-  121     	MOVIA	0x0b
     0005 000r                      1-  122     	IOST	_IOSTB
                                    1-  123     	.line	15, "main.c"; 	PORTB = 0xCB;                        	// PortB Data Register = 0x00
     0006 21CB                      1-  124     	MOVIA	0xcb
     0007 00rr                      1-  125     	MOVAR	_PORTB
                                    1-  126     	.line	16, "main.c"; 	PCON = C_WDT_En | C_LVR_En | C_LVD_En;				// Enable WDT & LVR
     0008 21A8                      1-  127     	MOVIA	0xa8
     0009 00rr                      1-  128     	MOVAR	_PCON
                                    1-  129     	.line	18, "main.c"; 	PCON1 = C_TMR0_Dis;
     000A 0200                      1-  130     	CLRA	
     000B 000r                      1-  131     	IOST	_PCON1
                                    1-  132     	.line	20, "main.c"; 	TMR0 = 55;
     000C 2137                      1-  133     	MOVIA	0x37
     000D 00rr                      1-  134     	MOVAR	_TMR0
                                    1-  135     	.line	21, "main.c"; 	T0MD =  C_PS0_TMR0 | C_PS0_Div2;
     000E 0200                      1-  136     	CLRA	
     000F 0003                      1-  137     	T0MD	
                                    1-  138     	.line	23, "main.c"; 	PCON1 = C_LVD_3P0V | C_TMR0_En;
     0010 2115                      1-  139     	MOVIA	0x15
     0011 000r                      1-  140     	IOST	_PCON1
                                    1-  141     	.line	25, "main.c"; 	ENI();	
     0012 0004                      1-  142     	ENI
                                    1-  143     	.line	26, "main.c"; 	pwmStart();
     0013 2rrr                      1-  144     	LCALL	_pwmStart
     0014                           1-  145     _00106_DS_:
                                    1-  146     	.line	29, "main.c"; 	CLRWDT();
     0014 0002                      1-  147     	clrwdt
     0015 3rrr                      1-  148     	LGOTO	_00106_DS_
                                    1-  149     	.line	32, "main.c"; 	}
                                    1-  150     	RETURN	
     0016 0010                      3-   26 m1      ret
                                    1-  151     ; exit point of _main
                                    1-  153     ;***
                                    1-  154     ;  pBlock Stats: dbName = C
                                    1-  155     ;***
                                    1-  156     ;has an exit
                                    1-  157     ;; Starting pCode block
                                    1-  158     .segment "code"; module=main, function=_pwmStop
     0000                           1-  160     _pwmStop:
                                    1-  161     ; 2 exit points
                                    1-  162     	.line	46, "main.c"; 	T1CR1 = C_TMR1_Dis;
     0000 0200                      1-  163     	CLRA	
     0001 002r                      1-  164     	SFUN	_T1CR1
                                    1-  165     	.line	47, "main.c"; 	PWM1DUTY = 0;
     0002 002r                      1-  166     	SFUN	_PWM1DUTY
                                    1-  167     	.line	48, "main.c"; 	PORTB &= 0xFC;	//关闭 
     0003 21FC                      1-  168     	MOVIA	0xfc
     0004 10rr                      1-  169     	ANDAR	_PORTB,F
                                    1-  170     	.line	49, "main.c"; 	}
                                    1-  171     	RETURN	
     0005 0010                      3-   26 m1      ret
                                    1-  172     ; exit point of _pwmStop
                                    1-  174     ;***
                                    1-  175     ;  pBlock Stats: dbName = C
                                    1-  176     ;***
                                    1-  177     ;has an exit
                                    1-  178     ;; Starting pCode block
                                    1-  179     .segment "code"; module=main, function=_pwmStart
     0000                           1-  181     _pwmStart:
                                    1-  182     ; 2 exit points
                                    1-  183     	.line	37, "main.c"; 	TMR1 = 0x05;							//频率为110K
     0000 2105                      1-  184     	MOVIA	0x05
     0001 002r                      1-  185     	SFUN	_TMR1
                                    1-  186     	.line	38, "main.c"; 	PWM1DUTY = 0x02;				// 		
     0002 2102                      1-  187     	MOVIA	0x02
     0003 002r                      1-  188     	SFUN	_PWM1DUTY
                                    1-  189     	.line	40, "main.c"; 	T1CR2 = C_TMR1_ClkSrc_Inst | C_PS1_Div2;	// Enable Prescaler1, Prescaler1 dividing rate = 1:2, Timer1 clock source is instruction clock 
     0004 0200                      1-  190     	CLRA	
     0005 002r                      1-  191     	SFUN	_T1CR2
                                    1-  192     	.line	41, "main.c"; 	T1CR1 = C_PWM1_En | C_TMR1_Reload | C_TMR1_En;	// PWM1 output will be present on PB6 , PWM1 output is active high, reloaded from TMR1, non-stop mode
     0006 2183                      1-  193     	MOVIA	0x83
     0007 002r                      1-  194     	SFUN	_T1CR1
                                    1-  195     	.line	42, "main.c"; 	}
                                    1-  196     	RETURN	
     0008 0010                      3-   26 m1      ret
                                    1-  197     ; exit point of _pwmStart
                                    1-  200     ;	code size estimation:
                                    1-  201     ;	   36+    0 =    36 instructions (   72 byte)
                                    1-  203     	end
                                    1-  203     	end

SYMBOL TABLE            TYPE     VALUE
__CHECKSUM_ADDR__       Label    00000000
__nyc_ny8_startup       Label    00000000
__PIN_COUNT__           Constant 00000006
__PROCESSOR__           Constant 00800515
_00106_DS_              Label    00000014
_BODCON                 Label    00000000
_BPHCON                 Label    00000000
_BPHCONbits             Label    00000000
_BPLCON                 Label    00000000
_BPLCONbits             Label    00000000
_BWUCON                 Label    00000000
_BWUCONbits             Label    00000000
_BZ1CR                  Label    00000000
_FSR                    Label    00000000
_INDF                   Label    00000000
_INTE                   Label    00000000
_INTEbits               Label    00000000
_INTF                   Label    00000000
_INTFbits               Label    00000000
_IOSTB                  Label    00000000
_IRCR                   Label    00000000
_main                   Label    00000000
_OSCCR                  Label    00000000
_PCHBUF                 Label    00000000
_PCL                    Label    00000000
_PCON                   Label    00000000
_PCON1                  Label    00000000
_PCONbits               Label    00000000
_PORTB                  Label    00000000
_PORTBbits              Label    00000000
_PS0CV                  Label    00000000
_PS1CV                  Label    00000000
_PWM1DUTY               Label    00000000
_pwmStart               Label    00000000
_pwmStop                Label    00000000
_STATUS                 Label    00000000
_T0MD                   Label    00000000
_T1CR1                  Label    00000000
_T1CR2                  Label    00000000
_TBHD                   Label    00000000
_TBHP                   Label    00000000
_TMR0                   Label    00000000
_TMR1                   Label    00000000
ENABLE_RAM_BANK         Variable 00000000
F                       Constant 00000001
FSR                     Constant 00000004
INDF                    Constant 00000000
PCHBUF                  Constant 0000000A
PCL                     Constant 00000002
PSAVE                   Label    00000000
SSAVE                   Label    00000001
STATUS                  Constant 00000003
STK00                   Label    00000005
STK01                   Label    00000004
STK02                   Label    00000003
W                       Constant 00000000
WSAVE                   Label    00000002


SOURCE FILE TABLE
001 main.s
002 ny8a051f.inc
003 common.inc
004 main.c

PROCESSOR    = NY8A051F (8 bits)
PROGRAM ROM  = 0x00000000 - 0x000003FF
DATA ROM     = 0x00000000 - 0x000003FF
RESERVED MEM = 0x00000400 - 0x00000410
SRAM / SFR   = 0x00000000 - 0x00000000
