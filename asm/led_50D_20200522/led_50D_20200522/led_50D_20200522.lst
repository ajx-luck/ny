
                    Nyquest Technology Co., Ltd.

NYASM 2.25 [Build 200410.00]  File=C:\Users\Administrator\Desktop\cproject\led_50D_20200522\led_50D_20200522\main.asm Date=2020/5/22 14:43:21

    ADDR  OPCODE/VALUE              LINE   TAG  SOURCE                   STATEMENT    

                                    0-0001      ; =========================================================================        
                                    0-0002      ; Project:       Timer Interrupt & WDT Interrupt
                                    0-0003      ; File:          main.asm
                                    0-0004      ; Description:   This Project teaches how to set Timer0、Timer1、WDT Interrupt
                                    0-0005      ;                1. FINST = 4MHz/4T(I_HRC)
                                    0-0006      ;                2. Timer0 overflow interrupt flag bit will be set every 2048us then toggle PB0 output state  
                                    0-0007      ;
                                    0-0008      ; Author:        JasonLee
                                    0-0009      ; Version:       V2.0
                                    0-0010      ; Date:          2018/12/10
                                    0-0011      ; =========================================================================
                                    0-0012      ;--------------- File Include ---------------------------------------------
                                    0-0013      ;--------------------------------------------------------------------------
                                    0-0014      #include		NY8A050D.H							; The Header File for NY8A050 Series
                                    1-0001      ;=======================================================================================================================
                                    1-0002      ;=======================================================================================================================
                                    1-0003      ;File:			NY8A050D.h
                                    1-0004      ;Description:	The Header File for NY8A050D
                                    1-0005      ;Author:		JasonLee
                                    1-0006      ;Date:			2019/03/13
                                    1-0007      ;=======================================================================================================================
                                    1-0008      ;=======================================================================================================================
                                    1-0009      ;-----------------------------------------------------------------------------------------------------------------------
                                    1-0010      ;MOVR and MOVAR instrutions for access R-page Register (General Purpose Register)
                                    1-0011      ;-----------------------------------------------------------------------------------------------------------------------
                                    1-0012      ;R-page sregisters				;	bit7	|	bit6	|	bit5	|	bit4	|	bit3	|	bit2	|	bit1	|	bit0
                                    1-0013      ;-----------------------------------------------------------------------------------------------------------------------	
                                    1-0014      ; 00H --------- Indirect Addressing Register
                  0                 1-  15      INDF				EQU		00H
                  0                 1-  16      Pr_Indir_Addr		EQU		00H
                                    1-0017      ; 01H --------- Timer0 Data Register	
                  1                 1-  18      TMR0				EQU		01H
                  1                 1-  19      Pr_TMR0_Data		EQU		01H
                                    1-0020      ; 02H --------- Low Byte of Program Counter
                  2                 1-  21      PCL					EQU		02H
                  2                 1-  22      Pr_PCLow_Data		EQU		02H
                                    1-0023      ; 03H --------- Status Register
                  3                 1-  24      STATUS				EQU		03H
                  3                 1-  25      Pr_Status			EQU		03H	;	-			-			-			/WDT_TO		/Sleep		Z			Half_C		C	
                                    1-0026      ; 04H --------- File Selection Register (Include SRAM Bank Select)
                  4                 1-  27      FSR					EQU		04H
                  4                 1-  28      Pr_File_Sel			EQU		04H	;	BK[1]		BK[0]		FSR[5]		FSR[4]		FSR[3]		FSR[2]		FSR[1]		FSR[0]	         
                                    1-0029      ; 05H --------- Reserved
                                    1-0030      ; 06H --------- PortB Data Register
                  6                 1-  31      PORTB				EQU		06H
                  6                 1-  32      Pr_PB_Data			EQU		06H
                                    1-0033      ; 07H --------- Reserved
                                    1-0034      ; 08H --------- Power Control Register (WatchDog, ExtINT and LVR Control)
                  8                 1-  35      PCON				EQU		08H
                  8                 1-  36      Pr_PWR_Ctrl			EQU		08H	;	WDTEn		ExtINTEn	-			-			LVREn		-			-			-	
                                    1-0037      ; 09H --------- PortB Wakeup Control Register
                  9                 1-  38      BWUCON				EQU		09H
                  9                 1-  39      Pr_PB_WakeUp_Ctrl	EQU		09H	;	-			-			PB[5]		PB[4]		PB[3]		PB[2]		PB[1]		PB[0]	    
                                    1-0040      ; 0AH --------- High Byte of Program Counter (B'xxxxxxDD')
                  A                 1-  41      PCHBUF				EQU		0AH
                  A                 1-  42      Pr_PCHigh_Data		EQU		0AH	;	-			-			-			-			-			-			-			PCHBUF[0]
                                    1-0043      ; 0BH --------- PortB Pull-Low Control Register
                  B                 1-  44      BPLCON				EQU		0BH
                  B                 1-  45      Pr_PB_PL_Ctrl		EQU		0BH	;	/PB[3]		/PB[2]		/PB[1]		/PB[0]		-			-			-			-			
                                    1-0046      ; 0CH --------- PortB Pull-High Control Register
                  C                 1-  47      BPHCON				EQU		0CH
                  C                 1-  48      Pr_PB_PH_Ctrl		EQU		0CH	;	-			-			/PB[5]		/PB[4]		/PB[3]	    /PB[2]		/PB[1]		/PB[0]	
                                    1-0049      ; 0DH --------- Reserved
                                    1-0050      ; 0EH --------- Interrupt Enable Register
                  E                 1-  51      INTE				EQU		0EH
                  E                 1-  52      Pr_INT_Ctrl			EQU		0EH	;	-			-			-			-			-			ExtINT		PBKey		TMR0	
                                    1-0053      ; 0FH --------- Interrupt Flag	(Write '0' to Clear Flag)
                  F                 1-  54      INTF				EQU		0FH
                  F                 1-  55      Pr_INT_Flag			EQU		0FH	;	-			-			-			-			-			ExtINT		PBKey		TMR0	
                                    1-0056      
                                    1-0057      ;-----------------------------------------------------------------------------------------------------------------------
                                    1-0058      ;T0MD and T0MDR instrutions for access T0MD Register
                                    1-0059      ;-----------------------------------------------------------------------------------------------------------------------
                                    1-0060      ; xxH --------- Timer0 Control Register (Only Accessed by Instruction T0MD)
                                    1-0061      ;T0MD				EQU		xxH	;	LClkSrc		INTEdge		ClkSel		EdgeSel		PS0WDT		PS0Div[2]	PS0Div[1]	PS0Div[0]	
                                    1-0062      ;P_TMR0_Ctrl
                                    1-0063      
                                    1-0064      ;-----------------------------------------------------------------------------------------------------------------------
                                    1-0065      ;IOST and IOSTR instrution for access F-page Register (IO Configuration Register)
                                    1-0066      ;-----------------------------------------------------------------------------------------------------------------------
                                    1-0067      ;F-page registers				;	bit7	|	bit6	|	bit5	|	bit4	|	bit3	|	bit2	|	bit1	|	bit0
                                    1-0068      ;-----------------------------------------------------------------------------------------------------------------------	
                                    1-0069      ; 05H --------- Reserved
                                    1-0070      ; 06H --------- PortB Direction(1:Input/0:Output) Control Register
                  6                 1-  71      IOSTB				EQU		06H
                  6                 1-  72      Pf_PB_Dir_Ctrl		EQU		06H
                                    1-0073      ; 0AH --------- Prescaler0 Counter Value Register
                  A                 1-  74      PS0CV				EQU		0AH
                  A                 1-  75      Pf_PS0_Cnt			EQU		0AH
                                    1-0076      ; 0CH --------- PortB Open-Drain Control Register
                  C                 1-  77      BODCON				EQU		0CH
                  C                 1-  78      Pf_PB_OD_Ctrl		EQU		0CH	;	-			-			PB[5]		PB[4]		-  			PB[2]		PB[1]		PB[0]		
                                    1-0079      ; 0FH --------- Power Control Register 1
                  F                 1-  80      PCON1				EQU		0FH
                  F                 1-  81      Pf_PWR_Ctrl1		EQU		0FH	;	INTEn		-			-			-			-			-			-			TMR0En	
                                    1-0082      
                                    1-0083      ;-----------------------------------------------------------------------------------------------------------------------
                                    1-0084      ;SFUN and SFUNR instrution for access S-page Register (Special Function Register)
                                    1-0085      ;-----------------------------------------------------------------------------------------------------------------------
                                    1-0086      ;S-page registers				;	bit7	|	bit6	|	bit5	|	bit4	|	bit3	|	bit2	|	bit1	|	bit0
                                    1-0087      ;-----------------------------------------------------------------------------------------------------------------------											
                                    1-0088      ; 07H --------- Table Access High Byte Address Pointer Register
                  7                 1-  89      TBHP				EQU		07H
                  7                 1-  90      Ps_TbHigh_Addr		EQU		07H	;	-			-			-			-		    -		   	-			-			HPoint[0]	
                                    1-0091      ; 08H --------- Table Access High Byte Data Register
                  8                 1-  92      TBHD				EQU		08H
                  8                 1-  93      Ps_TbHigh_Data		EQU		08H	;	-			-			HData[5]	HData[4]	HData[3]	HData[2]	HData[1]	HData[0]	
                                    1-0094      ; 0FH --------- Oscillation Control Register (Include Switch Working Mode)
                  F                 1-  95      OSCCR				EQU		0FH
                  F                 1-  96      Ps_SYS_Ctrl			EQU		0FH	;	-			-			-			-			Mode[1]		Mode[0]		HOSC_Stop	HOSC_Sel
                                    1-0097      
                                    1-0098      ;=======================================================================================================================
                                    1-0099      ;=======================================================================================================================
                                    1-0100      ;-----------------------------------------------------------------------------------------------------------------------
                                    1-0101      ; R-page Special Function Register (General Purpose Register)
                                    1-0102      ;-----------------------------------------------------------------------------------------------------------------------
                                    1-0103      ;------------------------------------------------------------
                                    1-0104      ; Pr_Indir_Addr (00H)	--------- Indirect Addressing Register
                                    1-0105      ;------------------------------------------------------------
                                    1-0106      ;Bit[7:0] : Indirect Address
                 FF                 1- 107      	C_Indir_Addr		EQU		FFH
                                    1-0108      
                                    1-0109      ;------------------------------------------------------------
                                    1-0110      ; Pr_TMR0_Data (01H)	--------- Timer0 Data Register	
                                    1-0111      ;------------------------------------------------------------
                                    1-0112      ;Bit[7:0] : Timer0 Data
                 FF                 1- 113      	C_TMR0_Data			EQU		FFH
                                    1-0114      
                                    1-0115      ;------------------------------------------------------------
                                    1-0116      ; Pr_PCLow_Data (02H)	--------- Low Byte of Program Counter
                                    1-0117      ;------------------------------------------------------------
                                    1-0118      ;Bit[7:0] : Low Byte of Program Counter
                 FF                 1- 119      	C_PCLow_Data		EQU		FFH
                                    1-0120      
                                    1-0121      ;------------------------------------------------------------
                                    1-0122      ; Pr_Status (03H)		--------- Status Register
                                    1-0123      ;------------------------------------------------------------
                                    1-0124      ;Bit[7:5] : Reserved
                                    1-0125      ;Bit[4:0] : System Status
                 10                 1- 126      	C_Status_WDT		EQU		10H			; WatchDog Overflow Flag
                  8                 1- 127      	C_Status_Slp		EQU		08H			; Sleep (Power Down) Flag
                  4                 1- 128      	C_Status_Z			EQU		04H			; Zero Flag
                  2                 1- 129      	C_Status_HalfC		EQU		02H			; Half Carry/Half Borrow Flag
                  1                 1- 130      	C_Status_C			EQU		01H			; Carry/Borrow Flag
                                    1-0131      	
                  4                 1- 132      	C_Status_WDT_Bit	EQU		4
                  3                 1- 133      	C_Status_Slp_Bit	EQU		3
                  2                 1- 134      	C_Status_Z_Bit		EQU		2
                  1                 1- 135      	C_Status_HalfC_Bit	EQU		1
                  0                 1- 136      	C_Status_C_Bit		EQU		0
                                    1-0137      
                                    1-0138      ;------------------------------------------------------------ 
                                    1-0139      ; Pr_File_Sel (04H)		--------- File Selection Register (Include SRAM Bank Select)        
                                    1-0140      ;------------------------------------------------------------
                                    1-0141      ;Bit[7:6] : FSR Bit Define	
                 C0                 1- 142      	C_SFR_Bank			EQU		C0H			; Select Ram Bank
                  0                 1- 143      	C_SFR_Bank0			EQU		00H			; Select Ram Bank0
                 40                 1- 144      	C_SFR_Bank1			EQU		40H			; Select Ram Bank1
                 80                 1- 145      	C_SFR_Bank2			EQU		80H			; Select Ram Bank2
                 C0                 1- 146      	C_SFR_Bank3			EQU		C0H			; Select Ram Bank3	
                                    1-0147      ;Bit[5:0] : Select one Register out of 64 registers of specific Bank.
                 3F                 1- 148      	C_SFR_RAM_Addr		EQU		3FH			; RAM Address Bit[5:0] 
                                    1-0149      
                                    1-0150      ;------------------------------------------------------------
                                    1-0151      ; Pr_PB_Data (06H)		--------- PortB Data Register
                                    1-0152      ;------------------------------------------------------------
                                    1-0153      ;Bit[7:6] : Reserved
                                    1-0154      ;Bit[5:0] : PORTB Data Bit Define	
                 3F                 1- 155      	C_PB_Data			EQU		3FH			; PB Data
                 20                 1- 156      	C_PB5_Data			EQU		20H			; PB5 Data
                 10                 1- 157      	C_PB4_Data			EQU		10H			; PB4 Data
                  8                 1- 158      	C_PB3_Data			EQU		08H			; PB3 Data
                  4                 1- 159      	C_PB2_Data			EQU		04H			; PB2 Data
                  2                 1- 160      	C_PB1_Data			EQU		02H			; PB1 Data
                  1                 1- 161      	C_PB0_Data			EQU		01H			; PB0 Data
                                    1-0162      
                                    1-0163      ;------------------------------------------------------------	
                                    1-0164      ; Pr_PWR_Ctrl (08H)		--------- Power Control Register (WatchDog, ExtINT and LVR Control) 
                                    1-0165      ;------------------------------------------------------------
                                    1-0166      ;Bit[7] : Reserved
                                    1-0167      ;Bit[6] : External INT Eanble
                 40                 1- 168      	C_ExtINT_En			EQU		40H			; External INT Enable
                                    1-0169      ;Bit[5:4] : Reserved		
                                    1-0170      ;Bit[3] : LVR Enable
                  8                 1- 171      	C_LVR_En			EQU		08H			; LVR Enable
                                    1-0172      ;Bit[2:0] : Reserved
                                    1-0173      	
                                    1-0174      ;------------------------------------------------------------	
                                    1-0175      ; Pr_PB_WakeUp_Ctrl (09H)	--------- PortB Wakeup Control Register
                                    1-0176      ;------------------------------------------------------------
                                    1-0177      ;Bit[7:6] : Reserved
                                    1-0178      ;Bit[5:0] : BWUCON Bit Define
                 3F                 1- 179      	C_PB_Wakeup			EQU		3FH			; PortB Wakeup Enable
                 20                 1- 180      	C_PB5_Wakeup		EQU		20H			; PB5 Wakeup Enable
                 10                 1- 181      	C_PB4_Wakeup		EQU		10H			; PB4 Wakeup Enable
                  8                 1- 182      	C_PB3_Wakeup		EQU		08H			; PB3 Wakeup Enable
                  4                 1- 183      	C_PB2_Wakeup		EQU		04H			; PB2 Wakeup Enable 
                  2                 1- 184      	C_PB1_Wakeup		EQU		02H			; PB1 Wakeup Enable
                  1                 1- 185      	C_PB0_Wakeup		EQU		01H			; PB0 Wakeup Enable
                                    1-0186      		
                                    1-0187      ;------------------------------------------------------------	
                                    1-0188      ; Pr_PCHigh_Data (0AH) --------- High Byte of Program Counter
                                    1-0189      ;------------------------------------------------------------
                                    1-0190      ;Bit[7:1] : Reserved
                                    1-0191      ;Bit[0] : High Byte of Program Counter
                  1                 1- 192      	C_PCHigh_Data		EQU		01H
                                    1-0193      	
                                    1-0194      ;------------------------------------------------------------		
                                    1-0195      ; Pr_PB_PL_Ctrl (0BH)	--------- PortB Pull-Low Control Register
                                    1-0196      ;------------------------------------------------------------
                                    1-0197      ;Bit[7:4] : PortB Pull-Low Control Register (1:Disable, 0:Pull-High)
                 F0                 1- 198          C_PB_PLB			EQU		F0H			; PortB Pull-Low Control bit
                 80                 1- 199          C_PB3_PLB			EQU		80H			; PB3 Pull-Low Control bit
                 40                 1- 200          C_PB2_PLB			EQU		40H			; PB2 Pull-Low Control bit	
                 20                 1- 201          C_PB1_PLB			EQU		20H			; PB1 Pull-Low Control bit 	
                 10                 1- 202          C_PB0_PLB			EQU		10H			; PB0 Pull-Low Control bit
                                    1-0203      ;Bit[3:0] : Reserved
                                    1-0204      
                                    1-0205      ;------------------------------------------------------------	
                                    1-0206      ; Pr_PB_PH_Ctrl (0CH)	--------- PortB Pull-High Control Register
                                    1-0207      ;------------------------------------------------------------
                                    1-0208      ;Bit[7:6] : Reserved
                                    1-0209      ;Bit[5:0]: PortB Pull-High Control Register (1:Disable, 0:Pull-High)
                 3F                 1- 210      	C_PB_PHB			EQU		3FH			; PortB Pull-Low Control bit   
                 20                 1- 211      	C_PB5_PHB			EQU		20H			; PB5 Pull-Low Control bit
                 10                 1- 212      	C_PB4_PHB			EQU		10H			; PB4 Pull-Low Control bit
                  8                 1- 213      	C_PB3_PHB			EQU		08H			; PB3 Pull-Low Control bit	
                  4                 1- 214      	C_PB2_PHB			EQU		04H			; PB2 Pull-Low Control bit
                  2                 1- 215      	C_PB1_PHB			EQU		02H			; PB1 Pull-Low Control bit
                  1                 1- 216      	C_PB0_PHB			EQU		01H			; PB0 Pull-Low Control bit
                                    1-0217      
                                    1-0218      ;------------------------------------------------------------	
                                    1-0219      ; Pr_INT_Ctrl (0EH)		--------- Interrupt Enable Register
                                    1-0220      ; Pr_INT_Flag (0FH)		--------- Interrupt Flag
                                    1-0221      ;------------------------------------------------------------
                                    1-0222      ;Bit[7:3] : Reserved
                                    1-0223      ;Bit[2:0] : Interrupt Source
                  4                 1- 224      	C_INT_EXT			EQU		04H			; External interrupt enable bit
                  2                 1- 225      	C_INT_PBKey			EQU		02H			; PortB input change interrupt enable bit
                  1                 1- 226      	C_INT_TMR0			EQU		01H			; Timer0 overflow interrupt enable bit 
                                    1-0227      
                  2                 1- 228      	C_INT_EXT_Bit		EQU		2
                  1                 1- 229      	C_INT_PBKey_Bit		EQU		1
                  0                 1- 230      	C_INT_TMR0_Bit		EQU		0
                                    1-0231      
                                    1-0232      ;------------------------------------------------------------	
                                    1-0233      ; P_TMR0_Ctrl (xxH)		--------- T0MD Register
                                    1-0234      ;------------------------------------------------------------
                                    1-0235      ;		C_TMR0_Clk		C_TMR0_LowClk	|	Timer 0 Clock Source
                                    1-0236      ;------------------------------------------------------------
                                    1-0237      ;		0				x				|	From Instruction Clock
                                    1-0238      ;		1				0				|	From External Pin
                                    1-0239      ;		1				1				|	From Low Oscillator Frequency (I_LRC )
                                    1-0240      ;------------------------------------------------------------
                                    1-0241      ;Bit[7:4] : Timer0 Clock Source Selection
                 80                 1- 242      	C_TMR0_LowClk		EQU		80H			; Same as LCKTM0
                 40                 1- 243      	C_EXINT_Edge		EQU		40H			; External INT Edge Select --- 1:Rising Edge, 0:Falling Edge
                 20                 1- 244      	C_TMR0_Clk			EQU		20H			; Same as T0CS
                 10                 1- 245      	C_TMR0_ExtClk_Edge	EQU		10H			; Timer0 External Clock Edge Select --- 1:Falling Edge, 0:Rising Edge
                                    1-0246      
                                    1-0247      ;Bit[3] : Watchdog reset Source Selection / Timer0 Prescaler0 Selection
                  8                 1- 248      	C_PS0_WDT			EQU		08H			; Prescaler0 is assigned to WDT
                  0                 1- 249      	C_PS0_TMR0			EQU		00H			; Prescaler0 is assigned to TMR0
                                    1-0250      ;Bit[2:0] : Prescaler0 Dividing Rate Selection
                  7                 1- 251      	C_PS0_Div			EQU		07H			; Prescaler0 Dividing Rate Selection
                  0                 1- 252      	C_PS0_Div2			EQU		00H
                  1                 1- 253      	C_PS0_Div4			EQU		01H
                  2                 1- 254      	C_PS0_Div8			EQU		02H
                  3                 1- 255      	C_PS0_Div16			EQU		03H
                  4                 1- 256      	C_PS0_Div32			EQU		04H
                  5                 1- 257      	C_PS0_Div64			EQU		05H
                  6                 1- 258      	C_PS0_Div128		EQU		06H
                  7                 1- 259      	C_PS0_Div256		EQU		07H
                                    1-0260      
                                    1-0261      ;=======================================================================================================================
                                    1-0262      ;=======================================================================================================================
                                    1-0263      ;-----------------------------------------------------------------------------------------------------------------------
                                    1-0264      ; F-page Special Function Register (IO Configuration Register)
                                    1-0265      ;-----------------------------------------------------------------------------------------------------------------------	
                                    1-0266      ;------------------------------------------------------------	
                                    1-0267      ; Pf_PB_Dir_Ctrl (06H)	--------- PortB Direction(Input/Output) Control Register
                                    1-0268      ;------------------------------------------------------------
                                    1-0269      ;Bit[7:6] : Reserved
                                    1-0270      ;Bit[5:0] : Port B Input/Output Mode Selection (1:Input, 0:Output)
                 3F                 1- 271      	C_PB_Input			EQU		3FH			; Port B Input Mode Control
                  0                 1- 272      	C_PB_Output			EQU		00H			; Port B Output Mode Control
                                    1-0273      
                 20                 1- 274      	C_PB5_Input			EQU		20H			; PB5 I/O mode Control bit
                 10                 1- 275      	C_PB4_Input			EQU		10H			; PB4 I/O mode Control bit
                  8                 1- 276      	C_PB3_Input			EQU		08H			; PB3 I/O mode Control bit
                  4                 1- 277      	C_PB2_Input			EQU		04H			; PB2 I/O mode Control bit
                  2                 1- 278      	C_PB1_Input			EQU		02H			; PB1 I/O mode Control bit
                  1                 1- 279      	C_PB0_Input			EQU		01H			; PB0 I/O mode Control bit
                  0                 1- 280      	C_PB5_Output		EQU		00H			; PB5 I/O mode Control bit
                  0                 1- 281      	C_PB4_Output		EQU		00H			; PB4 I/O mode Control bit
                  0                 1- 282      	C_PB3_Output		EQU		00H			; PB3 I/O mode Control bit
                  0                 1- 283      	C_PB2_Output		EQU		00H			; PB2 I/O mode Control bit
                  0                 1- 284      	C_PB1_Output		EQU		00H			; PB1 I/O mode Control bit
                  0                 1- 285      	C_PB0_Output		EQU		00H			; PB0 I/O mode Control bit
                                    1-0286      
                                    1-0287      ;------------------------------------------------------------	
                                    1-0288      ; Pf_PS0_Cnt (0AH)		--------- Prescaler0 Counter Value Register
                                    1-0289      ;------------------------------------------------------------
                                    1-0290      ;Bit[7:0] : Prescaler0 Counter Value
                                    1-0291      ;	C_PS0_Cnt			EQU		FFH			; 8-Bit register	
                                    1-0292      	
                                    1-0293      ;------------------------------------------------------------	
                                    1-0294      ; Pf_PB_OD_Ctrl (0CH)	--------- PortB Open-Drain Control Register
                                    1-0295      ;------------------------------------------------------------
                                    1-0296      ;Bit[7:6]&Bit[3]: Reserved
                                    1-0297      ;Bit[5:4]&Bit[2:0] : PortB Open-Drain Control (1:Open-Drain, 0:Disable)
                 37                 1- 298      	C_PB_OD				EQU		37H			; Port B Open-Drain Control
                 20                 1- 299      	C_PB5_OD			EQU		20H			; PB5 Open-Drain Control bit
                 10                 1- 300      	C_PB4_OD			EQU		10H			; PB4 Open-Drain Control bit
                  4                 1- 301      	C_PB2_OD			EQU		04H			; PB2 Open-Drain Control bit
                  2                 1- 302      	C_PB1_OD			EQU		02H			; PB1 Open-Drain Control bit 
                  1                 1- 303      	C_PB0_OD			EQU		01H			; PB0 Open-Drain Control bit
                                    1-0304      
                                    1-0305      ;------------------------------------------------------------	
                                    1-0306      ; Pf_PWR_Ctrl1 (0FH)	--------- Power Control Register 1
                                    1-0307      ;------------------------------------------------------------
                                    1-0308      ;Bit[7] : All Interrupt Enable
                 80                 1- 309      	C_All_INT_En		EQU		80H			; Enable all unmasked interrupts
                                    1-0310      ;Bit[6:1] : Reserved 
                                    1-0311      ;Bit[0] : Timer0 Enable
                  1                 1- 312      	C_TMR0_En			EQU		01H			; Enable Timer0
                  0                 1- 313      	C_TMR0_Dis			EQU		00H			; Disable Timer0
                                    1-0314      		
                                    1-0315      ;=======================================================================================================================
                                    1-0316      ;=======================================================================================================================
                                    1-0317      ;-----------------------------------------------------------------------------------------------------------------------
                                    1-0318      ; S-page Special Function Register (Special Function Register)
                                    1-0319      ;-----------------------------------------------------------------------------------------------------------------------		
                                    1-0320      
                                    1-0321      ;------------------------------------------------------------	
                                    1-0322      ; Ps_TbHigh_Addr (07H)	--------- Table Access High Byte Address Pointer Register
                                    1-0323      ;------------------------------------------------------------
                                    1-0324      ;Bit[7:1] : Reserved
                                    1-0325      ;Bit[0] : Table Access High Byte Address Pointer
                  1                 1- 326      	C_TbHigh_Addr		EQU		01H			; When instruction CALLA, GOTOA or TABLEA is executed TBHP[0] is PC[8]
                                    1-0327      
                                    1-0328      ;------------------------------------------------------------	
                                    1-0329      ; Ps_TbHigh_Data (08H)	--------- Table Access High Byte Data Register
                                    1-0330      ;------------------------------------------------------------
                                    1-0331      ;Bit[7:6] : Reserved
                                    1-0332      ;Bit[5:0] : Table Access High Byte Data
                 3F                 1- 333      	C_TbHigh_Data		EQU		3FH
                                    1-0334      
                                    1-0335      ;------------------------------------------------------------   
                                    1-0336      ; Ps_SYS_Ctrl (0FH)	--------- Table Access High Byte Data Register
                                    1-0337      ;------------------------------------------------------------
                                    1-0338      ;Bit[7:4] : Reserved
                                    1-0339      ;Bit[3:2] : System Mode Select
                  C                 1- 340      	C_Mode				EQU		0CH			; System Operating Mode Selection
                  0                 1- 341      	C_Normal_Mode		EQU		00H			; Enter Normal mode
                  4                 1- 342      	C_Halt_Mode			EQU		04H			; Enter Halt mode
                  8                 1- 343      	C_Standby_Mode		EQU		08H			; Enter Standby mode
                                    1-0344      ;Bit[1] : Stop FHOSC
                  2                 1- 345      	C_FHOSC_Stop		EQU		02H			; Disable high-frequency oscillation (FHOSC)
                                    1-0346      ;Bit[0] : FOSC Seletction
                  1                 1- 347      	C_FHOSC_Sel			EQU		01H			; OSCCR[0]=1 , FOSC is high-frequency oscillation (FHOSC)
                  0                 1- 348      	C_FLOSC_Sel			EQU		00H			; OSCCR[0]=0 , FOSC is Low-frequency oscillation (FLOSC)	
                                    1-0349      
                                    1-0350      
                                    1-0351      
                                    1-0352      ;=======================================================================================================================
                                    1-0353      ;=======================================================================================================================
                                    1-0354      ;-----------------------------------------------------------------------------------------------------------------------
                                    1-0355      ;General Constant Define
                                    1-0356      ;-----------------------------------------------------------------------------------------------------------------------
                  0                 1- 357      	C_SaveToAcc			EQU		00H	
                  1                 1- 358      	C_SaveToReg			EQU		01H	
                                    1-0359      
                  1                 1- 360      	C_Bit0				EQU		01H
                  2                 1- 361      	C_Bit1				EQU		02H
                  4                 1- 362      	C_Bit2				EQU		04H
                  8                 1- 363      	C_Bit3				EQU		08H
                 10                 1- 364      	C_Bit4				EQU		10H
                 20                 1- 365      	C_Bit5				EQU		20H
                 40                 1- 366      	C_Bit6				EQU		40H
                 80                 1- 367      	C_Bit7				EQU		80H
                                    1-0368      
                  0                 1- 369      	C_Num0				EQU		0
                  1                 1- 370      	C_Num1				EQU		1
                  2                 1- 371      	C_Num2				EQU		2
                  3                 1- 372      	C_Num3				EQU		3
                  4                 1- 373      	C_Num4				EQU		4
                  5                 1- 374      	C_Num5				EQU		5
                  6                 1- 375      	C_Num6				EQU		6
                  7                 1- 376      	C_Num7				EQU		7
                                    1-0377      	
                                    0-0015      
                                    0-0016      ;--------------- Variable Defination --------------------------------------
                                    0-0017      ;--------------------------------------------------------------------------
                 10                 0-  18              R_AccBuf		EQU		0x10			; Store ACC value
                 11                 0-  19              R_StatusBuf		EQU		0x11			; Store Status value
                 12                 0-  20              R_STATUS                 EQU              12H
                 14                 0-  21              R_TIME_COUNT			 	 EQU			  14H;计时
                                    0-0022              #DEFINE           T_FLAG             R_STATUS,0
                 20                 0-  23      		R_shift_regl	EQU		20H            	; Map to present state of PortB Data buffer 
                                    0-0024      
                                    0-0025      ;--------------- Constant Defination --------------------------------------
                                    0-0026      ;--------------------------------------------------------------------------
                                    0-0027      
                                    0-0028      ;--------------- Vector Defination ----------------------------------------
                                    0-0029      ;--------------------------------------------------------------------------
                  0                 0-  30      		ORG		0x000		
        0 3810                      0-  31     		lgoto	V_Main
                                    0-0032      		
                  8                 0-  33      		ORG		0x008
        8 3843                      0-  34     		lgoto	V_INT
                                    0-0035      
                                    0-0036      ;--------------- Code Start -----------------------------------------------
                                    0-0037      ;--------------------------------------------------------------------------
                 10                 0-  38              ORG		0x010         
                 10                 0-  39      V_Main:
                                    0-0040      
                                    0-0041      ;Initial GPIO  
                                    0-0042      			
       10 213F                      0-  43             movia   C_PB_PHB 
       11 008C                      0-  44     	    movar   Pr_PB_PH_Ctrl			; PB禁止拉高
                                    0-0045      	    
       12 2100                      0-  46     	    movia   0x00
       13 0086                      0-  47     		movar   Pr_PB_Data				; 
                                    0-0048      								 
       14 2100                      0-  49     		movia   C_PB_Output
       15 0006                      0-  50     		iost    Pf_PB_Dir_Ctrl			; PB口设置输出                                     
       16 2101                      0-  51     		movia   0x01
       17 0086                      0-  52     		movar   Pr_PB_Data				; 
                                    0-0053      		
       18 2100                      0-  54     		movia	0x00
       19 0094                      0-  55     		movar	R_TIME_COUNT  
                                    0-0056      		
       1A 0013                      0-  57             DISI                                    ; Disable all interrupts 
                                    0-0058      		
                                    0-0059      ;Initial Timer0
       1B 2100                      0-  60             movia	C_TMR0_Dis                
       1C 000F                      0-  61             iost    Pf_PWR_Ctrl1                    ; Disable Timer0
                                    0-0062              
       1D 213D                      0-  63     		movia	61            
       1E 0081                      0-  64     		movar	Pr_TMR0_Data                    ; Load 0x00 to TMR0 (Initial Timer0 register)
                                    0-0065      		
       1F 2107                      0-  66     		movia	C_PS0_TMR0 | C_PS0_Div256              
       20 0003                      0-  67     		t0md	                                ; Prescaler0 is assigned to Timer0, Prescaler0 dividing rate = 1:8,
                                    0-0068      		                                        ; Timer0 clock source is instruction clock		                               		                              
                                    0-0069      ;Setting Interrupt Enable Register
       21 2101                      0-  70             movia   C_INT_TMR0
       22 008E                      0-  71             movar   Pr_INT_Ctrl                     ; Enable Timer0 overflow interrupt
                                    0-0072      
                                    0-0073      ;Initial Power control register
       23 2108                      0-  74             movia   C_LVR_En
       24 0088                      0-  75             movar   Pr_PWR_Ctrl                     ; Enable LVR
                                    0-0076      
                                    0-0077      ;Enable Timer0 & Global interrupt bit 
       25 2101                      0-  78             movia	C_TMR0_En              
       26 000F                      0-  79             iost    Pf_PWR_Ctrl1                    ; Enable Timer0
       27 0004                      0-  80             eni                                     ; Enable all unmasked interrupts
                                    0-0081      
                                    0-0082      ;--------------------------------------------------------------		
                 28                 0-  83      L_MainLoop:
       28 0002                      0-  84     		clrwdt	
                 29                 0-  85      COME_ON:
       29 0812                      0-  86     		BTRSS   T_FLAG					;0.05S执行一次
       2A 3828                      0-  87     		LGOTO   L_MainLoop
       2B 1C12                      0-  88     		BCR     T_FLAG		
                                    0-0089      	
       2C 0594                      0-  90     		INCR    R_TIME_COUNT,1
       2D 210A                      0-  91     		MOVIA   10
       2E 3694                      0-  92             CMPAR   R_TIME_COUNT
       2F 0803                      0-  93             BTRSS   STATUS,0
       30 3828                      0-  94             LGOTO   L_MainLoop
       31 0294                      0-  95             CLRR	R_TIME_COUNT			;0.5s执行一次
       32 2110                      0-  96             MOVIA   0x10
       33 3686                      0-  97             CMPAR   Pr_PB_Data
       34 0C03                      0-  98             BTRSC   STATUS,0
       35 383D                      0-  99             LGOTO	LED1ON
       36 2104                      0- 100             MOVIA   4
       37 3686                      0- 101             CMPAR   Pr_PB_Data
       38 0C03                      0- 102             BTRSC   STATUS,0
       39 3840                      0- 103             LGOTO	LED4ON  
       3A 1C03                      0- 104             BCR		STATUS,0
       3B 1486                      0- 105             RLR		Pr_PB_Data,1
       3C 3828                      0- 106     		lgoto	L_MainLoop
                                    0-0107      
                                    0-0108      
                 3D                 0- 109      LED1ON:
       3D 2101                      0- 110     		MOVIA   0X01
       3E 0086                      0- 111     		MOVAR	Pr_PB_Data
       3F 3828                      0- 112     		LGOTO   L_MainLoop
                 40                 0- 113      LED4ON:
       40 2110                      0- 114     		MOVIA   0X10
       41 0086                      0- 115     		MOVAR	Pr_PB_Data
       42 3828                      0- 116     		LGOTO   L_MainLoop
                                    0-0117      ;--------------- Interrupt Service Routine --------------------------------
                                    0-0118      ;--------------------------------------------------------------------------
                 43                 0- 119      V_INT:
       43 0090                      0- 120     		movar	R_AccBuf						; Store ACC value                  
       44 1590                      0- 121     		swapr	R_AccBuf,C_SaveToReg
       45 0103                      0- 122     		movr	Pr_Status,C_SaveToAcc
       46 0091                      0- 123     		movar	R_StatusBuf						; Store STATUS value
                                    0-0124      ;--------------------------------------------------------------
                                    0-0125      ;Timer0 Interrupt
                 47                 0- 126      L_TIME0_INT:
       47 080F                      0- 127     		btrss	Pr_INT_Flag,C_INT_TMR0_Bit      ; Skip next instruction, if T0IF=1
       48 384F                      0- 128     		lgoto	L_RET2Main		
       49 213D                      0- 129     		movia	61             
       4A 0081                      0- 130     		movar	Pr_TMR0_Data                    ; Load 0x00 to TMR0 (Initial Timer0 register)
       4B 1812                      0- 131     		BSR     T_FLAG
       4C 384D                      0- 132     		lgoto	L_clr_flag_Timer0   
                                    0-0133      		
                                    0-0134      		
                 4D                 0- 135      L_clr_flag_Timer0:
       4D 21FE                      0- 136     		movia   ~C_INT_TMR0             
       4E 008F                      0- 137     		movar	Pr_INT_Flag                     ; Clear T0IF (Timer0 overflow interrupt flag bit)
                                    0-0138      			
                                    0-0139      				
                 4F                 0- 140      L_RET2Main:	 
       4F 0111                      0- 141     		movr	R_StatusBuf,C_SaveToAcc
       50 0083                      0- 142     		movar	Pr_Status                       ; Restore STATUS value
       51 1510                      0- 143     		swapr	R_AccBuf,C_SaveToAcc			; Restore ACC value	  
       52 0011                      0- 144     	    retie                                   ; Return from interrupt and enable interrupt globally
                                    0-0145      	
                                    0-0146      end                                             ; End of Code

NYASM 2.25 [Build 200410.00]  File=C:\Users\Administrator\Desktop\cproject\led_50D_20200522\led_50D_20200522\main.asm Date=2020/5/22 14:43:21

SYMBOL TABLE            TYPE     VALUE

__8A050D                Constant 00000001
__PIN_COUNT__           Constant 00000006
__PROCESSOR__           Constant 00800503
BODCON                  Constant 0000000C
BPHCON                  Constant 0000000C
BPLCON                  Constant 0000000B
BWUCON                  Constant 00000009
C_ALL_INT_EN            Constant 00000080
C_BIT0                  Constant 00000001
C_BIT1                  Constant 00000002
C_BIT2                  Constant 00000004
C_BIT3                  Constant 00000008
C_BIT4                  Constant 00000010
C_BIT5                  Constant 00000020
C_BIT6                  Constant 00000040
C_BIT7                  Constant 00000080
C_EXINT_EDGE            Constant 00000040
C_EXTINT_EN             Constant 00000040
C_FHOSC_SEL             Constant 00000001
C_FHOSC_STOP            Constant 00000002
C_FLOSC_SEL             Constant 00000000
C_HALT_MODE             Constant 00000004
C_INDIR_ADDR            Constant 000000FF
C_INT_EXT               Constant 00000004
C_INT_EXT_BIT           Constant 00000002
C_INT_PBKEY             Constant 00000002
C_INT_PBKEY_BIT         Constant 00000001
C_INT_TMR0              Constant 00000001
C_INT_TMR0_BIT          Constant 00000000
C_LVR_EN                Constant 00000008
C_MODE                  Constant 0000000C
C_NORMAL_MODE           Constant 00000000
C_NUM0                  Constant 00000000
C_NUM1                  Constant 00000001
C_NUM2                  Constant 00000002
C_NUM3                  Constant 00000003
C_NUM4                  Constant 00000004
C_NUM5                  Constant 00000005
C_NUM6                  Constant 00000006
C_NUM7                  Constant 00000007
C_PB_DATA               Constant 0000003F
C_PB_INPUT              Constant 0000003F
C_PB_OD                 Constant 00000037
C_PB_OUTPUT             Constant 00000000
C_PB_PHB                Constant 0000003F
C_PB_PLB                Constant 000000F0
C_PB_WAKEUP             Constant 0000003F
C_PB0_DATA              Constant 00000001
C_PB0_INPUT             Constant 00000001
C_PB0_OD                Constant 00000001
C_PB0_OUTPUT            Constant 00000000
C_PB0_PHB               Constant 00000001
C_PB0_PLB               Constant 00000010
C_PB0_WAKEUP            Constant 00000001
C_PB1_DATA              Constant 00000002
C_PB1_INPUT             Constant 00000002
C_PB1_OD                Constant 00000002
C_PB1_OUTPUT            Constant 00000000
C_PB1_PHB               Constant 00000002
C_PB1_PLB               Constant 00000020
C_PB1_WAKEUP            Constant 00000002
C_PB2_DATA              Constant 00000004
C_PB2_INPUT             Constant 00000004
C_PB2_OD                Constant 00000004
C_PB2_OUTPUT            Constant 00000000
C_PB2_PHB               Constant 00000004
C_PB2_PLB               Constant 00000040
C_PB2_WAKEUP            Constant 00000004
C_PB3_DATA              Constant 00000008
C_PB3_INPUT             Constant 00000008
C_PB3_OUTPUT            Constant 00000000
C_PB3_PHB               Constant 00000008
C_PB3_PLB               Constant 00000080
C_PB3_WAKEUP            Constant 00000008
C_PB4_DATA              Constant 00000010
C_PB4_INPUT             Constant 00000010
C_PB4_OD                Constant 00000010
C_PB4_OUTPUT            Constant 00000000
C_PB4_PHB               Constant 00000010
C_PB4_WAKEUP            Constant 00000010
C_PB5_DATA              Constant 00000020
C_PB5_INPUT             Constant 00000020
C_PB5_OD                Constant 00000020
C_PB5_OUTPUT            Constant 00000000
C_PB5_PHB               Constant 00000020
C_PB5_WAKEUP            Constant 00000020
C_PCHIGH_DATA           Constant 00000001
C_PCLOW_DATA            Constant 000000FF
C_PS0_DIV               Constant 00000007
C_PS0_DIV128            Constant 00000006
C_PS0_DIV16             Constant 00000003
C_PS0_DIV2              Constant 00000000
C_PS0_DIV256            Constant 00000007
C_PS0_DIV32             Constant 00000004
C_PS0_DIV4              Constant 00000001
C_PS0_DIV64             Constant 00000005
C_PS0_DIV8              Constant 00000002
C_PS0_TMR0              Constant 00000000
C_PS0_WDT               Constant 00000008
C_SAVETOACC             Constant 00000000
C_SAVETOREG             Constant 00000001
C_SFR_BANK              Constant 000000C0
C_SFR_BANK0             Constant 00000000
C_SFR_BANK1             Constant 00000040
C_SFR_BANK2             Constant 00000080
C_SFR_BANK3             Constant 000000C0
C_SFR_RAM_ADDR          Constant 0000003F
C_STANDBY_MODE          Constant 00000008
C_STATUS_C              Constant 00000001
C_STATUS_C_BIT          Constant 00000000
C_STATUS_HALFC          Constant 00000002
C_STATUS_HALFC_BIT      Constant 00000001
C_STATUS_SLP            Constant 00000008
C_STATUS_SLP_BIT        Constant 00000003
C_STATUS_WDT            Constant 00000010
C_STATUS_WDT_BIT        Constant 00000004
C_STATUS_Z              Constant 00000004
C_STATUS_Z_BIT          Constant 00000002
C_TBHIGH_ADDR           Constant 00000001
C_TBHIGH_DATA           Constant 0000003F
C_TMR0_CLK              Constant 00000020
C_TMR0_DATA             Constant 000000FF
C_TMR0_DIS              Constant 00000000
C_TMR0_EN               Constant 00000001
C_TMR0_EXTCLK_EDGE      Constant 00000010
C_TMR0_LOWCLK           Constant 00000080
COME_ON                 Label    00000029
FSR                     Constant 00000004
INDF                    Constant 00000000
INTE                    Constant 0000000E
INTF                    Constant 0000000F
IOSTB                   Constant 00000006
L_CLR_FLAG_TIMER0       Label    0000004D
L_MAINLOOP              Label    00000028
L_RET2MAIN              Label    0000004F
L_TIME0_INT             Label    00000047
LED1ON                  Label    0000003D
LED4ON                  Label    00000040
OSCCR                   Constant 0000000F
PCHBUF                  Constant 0000000A
PCL                     Constant 00000002
PCON                    Constant 00000008
PCON1                   Constant 0000000F
PF_PB_DIR_CTRL          Constant 00000006
PF_PB_OD_CTRL           Constant 0000000C
PF_PS0_CNT              Constant 0000000A
PF_PWR_CTRL1            Constant 0000000F
PORTB                   Constant 00000006
PR_FILE_SEL             Constant 00000004
PR_INDIR_ADDR           Constant 00000000
PR_INT_CTRL             Constant 0000000E
PR_INT_FLAG             Constant 0000000F
PR_PB_DATA              Constant 00000006
PR_PB_PH_CTRL           Constant 0000000C
PR_PB_PL_CTRL           Constant 0000000B
PR_PB_WAKEUP_CTRL       Constant 00000009
PR_PCHIGH_DATA          Constant 0000000A
PR_PCLOW_DATA           Constant 00000002
PR_PWR_CTRL             Constant 00000008
PR_STATUS               Constant 00000003
PR_TMR0_DATA            Constant 00000001
PS_SYS_CTRL             Constant 0000000F
PS_TBHIGH_ADDR          Constant 00000007
PS_TBHIGH_DATA          Constant 00000008
PS0CV                   Constant 0000000A
R_ACCBUF                Constant 00000010
R_SHIFT_REGL            Constant 00000020
R_STATUS                Constant 00000012
R_STATUSBUF             Constant 00000011
R_TIME_COUNT            Constant 00000014
STATUS                  Constant 00000003
T_FLAG                  Define   R_STATUS,0
TBHD                    Constant 00000008
TBHP                    Constant 00000007
TMR0                    Constant 00000001
V_INT                   Label    00000043
V_MAIN                  Label    00000010


SOURCE FILE TABLE
000 C:\Users\Administrator\Desktop\cproject\led_50D_20200522\led_50D_20200522\main.asm
001 C:\Users\Administrator\Desktop\cproject\led_50D_20200522\led_50D_20200522\NY8A050D.H

PROCESSOR    = NY8A050D (8 bits) 
PROGRAM ROM  = 0x00000000 - 0x000001FF
DATA ROM     = 0x00000000 - 0x000001FF
SRAM / SFR   = 0x00000000 - 0x00000000
